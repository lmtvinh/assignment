<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Danh Sach San Pham</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
    integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="css/style.css" />
</head>

<body>
  <!-- nav start -->
  <nav id="nav_bar">
    <ul class="menu_level1">
      <li class="item_level1">
        <a href="#" class="item_livel1_title">Quan Ao</a>
        <ul class="menu_level2">
          <li class="item_level2">
            <a href="#" class="item_level2_title">Quan Ao Nam</a>
          </li>
          <li class="item_level2">
            <a href="#" class="item_level2_title">Quan Ao Nu</a>
          </li>
        </ul>
      </li>
      <li class="item_level1">
        <a href="#" class="item_level1_title">Phu Kien</a>
      </li>
      <li class="item_level1">
        <a href="#" class="item_level1_title">Do Dien Tu</a>
        <ul class="menu_level2">
          <li class="item_level2">
            <a href="#" class="item_level2_title">Dien Thoai</a>
          </li>
          <li class="item_level2">
            <a href="#" class="item_level2_title">Do Gia Dung</a>
          </li>
        </ul>
      </li>
      <li class="item_level1">
        <i class="fa fa-solid fa-cart-shopping"></i>
      </li>
    </ul>
  </nav>
  <!-- nav end -->
  <!-- slider start -->
  <section id="slider">
    <img src="" alt="Hinh Anh Slider" />
  </section>
  <!-- slider end -->
  <!-- section start -->
  <section id="products">
    <!-- Hien thi danh sach san pham -->
    <div class="items">
      <!-- 1 -->
      <div class="item">
        <div class="item_thumb">
          <img src="https://th.bing.com/th/id/R.108f28c0d5a2adadc6090ee9ec7a101e?rik=tezTI374j7u55Q&pid=ImgRaw&r=0"
            alt="" />
        </div>
        <h2 class="item_title">Iphone 5</h2>
        <div class="item_price">
          <span class="item_price_origin">5000000đ</span>
          <span class="item_price_sale">4000000đ</span>
        </div>
        <button class="btn btn-primary">Add to cart</button>
      </div>
      <!-- 2 -->
      <div class="item">
        <div class="item_thumb">
          <img src="https://th.bing.com/th/id/R.108f28c0d5a2adadc6090ee9ec7a101e?rik=tezTI374j7u55Q&pid=ImgRaw&r=0"
            alt="" />
        </div>
        <h2 class="item_title">Iphone 5</h2>
        <div class="item_price">
          <span class="item_price_origin">5000000đ</span>
          <span class="item_price_sale">4000000đ</span>
        </div>
        <button class="btn btn-primary">Add to cart</button>
      </div>
      <!-- 3 -->
      <div class="item">
        <div class="item_thumb">
          <img src="https://th.bing.com/th/id/R.108f28c0d5a2adadc6090ee9ec7a101e?rik=tezTI374j7u55Q&pid=ImgRaw&r=0"
            alt="" />
        </div>
        <h2 class="item_title">Iphone 5</h2>
        <div class="item_price">
          <span class="item_price_origin">5000000đ</span>
          <span class="item_price_sale">4000000đ</span>
        </div>
        <button class="btn btn-primary">Add to cart</button>
      </div>
      <!-- 4 -->
      <div class="item">
        <div class="item_thumb">
          <img src="https://th.bing.com/th/id/R.108f28c0d5a2adadc6090ee9ec7a101e?rik=tezTI374j7u55Q&pid=ImgRaw&r=0"
            alt="" />
        </div>
        <h2 class="item_title">Iphone 5</h2>
        <div class="item_price">
          <span class="item_price_origin">5000000đ</span>
          <span class="item_price_sale">4000000đ</span>
        </div>
        <button class="btn btn-primary">Add to cart</button>
      </div>
      <!-- 5 -->
      <div class="item">
        <div class="item_thumb">
          <img src="https://th.bing.com/th/id/R.108f28c0d5a2adadc6090ee9ec7a101e?rik=tezTI374j7u55Q&pid=ImgRaw&r=0"
            alt="" />
        </div>
        <h2 class="item_title">Iphone 5</h2>
        <div class="item_price">
          <span class="item_price_origin">5000000đ</span>
          <span class="item_price_sale">4000000đ</span>
        </div>
        <button class="btn btn-primary">Add to cart</button>
      </div>
      <!-- 6 -->
      <div class="item">
        <div class="item_thumb">
          <img src="https://th.bing.com/th/id/R.108f28c0d5a2adadc6090ee9ec7a101e?rik=tezTI374j7u55Q&pid=ImgRaw&r=0"
            alt="" />
        </div>
        <h2 class="item_title">Iphone 5</h2>
        <div class="item_price">
          <span class="item_price_origin">5000000đ</span>
          <span class="item_price_sale">4000000đ</span>
        </div>
        <button class="btn btn-primary">Add to cart</button>
      </div>
    </div>
  </section>
  <!-- section end -->
  <!-- footer start -->
  <footer>codeBy@Vinh</footer>
  <!-- footer end -->
  <script src="san_pham.js"></script>
  <script src="hotro.js"></script>
  <script src="giohang.js"></script>
  <script>
    // Buoc 1: Lay danh sach san pham duoi LocalStorage
    let jsonDanhSachSanPham = localStorage.getItem("danhSachSanPham");
    let danhSachSanPham = TaoDoiTuongSanPhan().fromJSONs(jsonDanhSachSanPham);
    // let danhSachSanPham = JSON.parse(jsonDanhSachSanPham);
    console.log(danhSachSanPham);

    // Buoc 2: Chuyen danh sach san pham sang doan HTML
    let HTML = chuyenDanhSachDoiTuongSanPhamThanhHTML(danhSachSanPham);

    // Buoc 3: Gan doan HTML vao section products
    let nodeProducts = document.getElementById("products");
    nodeProducts.innerHTML = HTML;

    function onClickDuaVaoGioHang(idSanPham) {
      alert(`onClick dua vao gio hang voi san pham co ID la: ` + idSanPham);
      // Buoc 1: Phan tich luu tru gio hang nhu the nao? Luu tru trong Local Storage
      // Gio hang la mot danh sach cac doi tuong la item gio hang. Item gio hang bao gom cac thong tin:
      // 1. San pham la gi -> su dung ID cua san pham de luu tru 
      // 2. So luong bao nhieu

      // Buoc 2: Xay dung ham tao nhanh doi tuong ITEM gio hang


      // Buoc 3: Lay danh sach gio hang co trong local storage len
      var danhSachItemGioHang = LayDanhSachItemGioHang();

      // Buoc 4: Them item vao danh sach gio hang
      var coTonTaiTrongDanhSachItemGioHang = false;
      for (var i = 0; i < danhSachItemGioHang.length; i++) {
        var itemGioHangHienTai = danhSachItemGioHang[i];

        // Neu ton tai thi tang so luong len
        if (itemGioHangHienTai.idSanPham == idSanPham) {
          danhSachItemGioHang[i].soLuong++;
          coTonTaiTrongDanhSachItemGioHang = true;
        }
      }

      // Neu khong ton tai => tao ra doi tuong va them vao danh sach ITEM gio hang
      if (coTonTaiTrongDanhSachItemGioHang === false) {
        var itemGioHang = TaoDoiTuongItemGioHang(idSanPham, 1);
        danhSachItemGioHang.push(itemGioHang);
      }
      // Buoc 5: luu tru lai vao LocalStorage
      luuDanhSachItemGioHangVaoLocalStorage(danhSachItemGioHang);


    }
  </script>
</body>

</html>